CREATE TABLE checkin_equipment_instance (checkin_id INT AUTO_INCREMENT NOT NULL, checked_by INT NOT NULL, equipment_instance_id INT DEFAULT NULL, checkin_date DATETIME DEFAULT NULL, comment LONGTEXT DEFAULT NULL, INDEX IDX_5575C94E82E3C2DE (checked_by), INDEX IDX_5575C94E5B13863A (equipment_instance_id), PRIMARY KEY(checkin_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE checkout_equipment_instance (checkout_id INT AUTO_INCREMENT NOT NULL, checked_by INT NOT NULL, organization_id INT DEFAULT NULL, equipment_instance_id INT DEFAULT NULL, checkout_date DATETIME NOT NULL, checkin_date DATETIME DEFAULT NULL, contact_person VARCHAR(50) DEFAULT NULL, contact_person_phone VARCHAR(50) DEFAULT NULL, contact_person_position VARCHAR(50) DEFAULT NULL, comment LONGTEXT DEFAULT NULL, INDEX IDX_BF67EAF982E3C2DE (checked_by), INDEX IDX_BF67EAF932C8A3DE (organization_id), INDEX IDX_BF67EAF95B13863A (equipment_instance_id), PRIMARY KEY(checkout_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE documentation_section_attachment (attachment_id INT AUTO_INCREMENT NOT NULL, documentation_section_id INT DEFAULT NULL, attachment_taxonomy_id INT DEFAULT NULL, title VARCHAR(200) DEFAULT NULL, description LONGTEXT DEFAULT NULL, file VARCHAR(200) DEFAULT NULL, author VARCHAR(200) DEFAULT NULL, version VARCHAR(100) DEFAULT NULL, mime_type VARCHAR(100) DEFAULT NULL, date_add DATETIME DEFAULT NULL, INDEX IDX_22ADE8C299216C44 (documentation_section_id), INDEX IDX_22ADE8C2AE9BD797 (attachment_taxonomy_id), PRIMARY KEY(attachment_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE html_content_documentation_section (html_content_id INT AUTO_INCREMENT NOT NULL, documentation_section_id INT DEFAULT NULL, html_content LONGTEXT DEFAULT NULL, date_add DATETIME DEFAULT NULL, date_update DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_1130689E99216C44 (documentation_section_id), PRIMARY KEY(html_content_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE html_content_inline_section (html_content_id INT AUTO_INCREMENT NOT NULL, inline_section_id INT DEFAULT NULL, html_content LONGTEXT DEFAULT NULL, date_add DATETIME DEFAULT NULL, date_update DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_4319B49C7334AA34 (inline_section_id), PRIMARY KEY(html_content_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE html_content_page_inline_section (html_content_id INT AUTO_INCREMENT NOT NULL, page_inline_section_id INT DEFAULT NULL, html_content LONGTEXT DEFAULT NULL, date_add DATETIME DEFAULT NULL, date_update DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_A299EAAEFC303383 (page_inline_section_id), PRIMARY KEY(html_content_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE html_content_page_section (html_content_id INT AUTO_INCREMENT NOT NULL, page_section_id INT DEFAULT NULL, html_content LONGTEXT DEFAULT NULL, date_add DATETIME DEFAULT NULL, date_update DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_14746206D3C3D2E4 (page_section_id), PRIMARY KEY(html_content_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE inline_section (section_id INT AUTO_INCREMENT NOT NULL, documentation_id INT DEFAULT NULL, parent_id INT DEFAULT NULL, `label` VARCHAR(255) NOT NULL, section_order INT NOT NULL, INDEX IDX_E427E2A7C703EEC9 (documentation_id), INDEX IDX_E427E2A7727ACA70 (parent_id), PRIMARY KEY(section_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE inline_section_attachment (attachment_id INT AUTO_INCREMENT NOT NULL, inline_section_id INT DEFAULT NULL, attachment_taxonomy_id INT DEFAULT NULL, title VARCHAR(200) DEFAULT NULL, description LONGTEXT DEFAULT NULL, file VARCHAR(200) DEFAULT NULL, author VARCHAR(200) DEFAULT NULL, version VARCHAR(100) DEFAULT NULL, mime_type VARCHAR(100) DEFAULT NULL, date_add DATETIME DEFAULT NULL, INDEX IDX_104F9FB57334AA34 (inline_section_id), INDEX IDX_104F9FB5AE9BD797 (attachment_taxonomy_id), PRIMARY KEY(attachment_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE page (page_id INT AUTO_INCREMENT NOT NULL, equipment_taxonomy_id INT DEFAULT NULL, name VARCHAR(100) DEFAULT NULL, featured_image VARCHAR(200) DEFAULT NULL, INDEX IDX_140AB620F41512D1 (equipment_taxonomy_id), PRIMARY KEY(page_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE page_inline_section (section_id INT AUTO_INCREMENT NOT NULL, page_section_id INT DEFAULT NULL, parent_id INT DEFAULT NULL, `label` VARCHAR(255) NOT NULL, section_order INT NOT NULL, INDEX IDX_55BDD1F3D3C3D2E4 (page_section_id), INDEX IDX_55BDD1F3727ACA70 (parent_id), PRIMARY KEY(section_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE page_inline_section_attachment (attachment_id INT AUTO_INCREMENT NOT NULL, page_inline_section_id INT DEFAULT NULL, attachment_taxonomy_id INT DEFAULT NULL, title VARCHAR(200) DEFAULT NULL, description LONGTEXT DEFAULT NULL, file VARCHAR(200) DEFAULT NULL, author VARCHAR(200) DEFAULT NULL, version VARCHAR(100) DEFAULT NULL, mime_type VARCHAR(100) DEFAULT NULL, date_add DATETIME DEFAULT NULL, INDEX IDX_1E0B16B1FC303383 (page_inline_section_id), INDEX IDX_1E0B16B1AE9BD797 (attachment_taxonomy_id), PRIMARY KEY(attachment_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE page_section (section_id INT AUTO_INCREMENT NOT NULL, page_id INT DEFAULT NULL, parent_id INT DEFAULT NULL, `label` VARCHAR(255) NOT NULL, section_order INT NOT NULL, INDEX IDX_D713917AC4663E4 (page_id), INDEX IDX_D713917A727ACA70 (parent_id), PRIMARY KEY(section_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE page_section_attachment (attachment_id INT AUTO_INCREMENT NOT NULL, page_section_id INT DEFAULT NULL, attachment_taxonomy_id INT DEFAULT NULL, title VARCHAR(200) DEFAULT NULL, description LONGTEXT DEFAULT NULL, file VARCHAR(200) DEFAULT NULL, author VARCHAR(200) DEFAULT NULL, version VARCHAR(100) DEFAULT NULL, mime_type VARCHAR(100) DEFAULT NULL, date_add DATETIME DEFAULT NULL, INDEX IDX_B165C1D2D3C3D2E4 (page_section_id), INDEX IDX_B165C1D2AE9BD797 (attachment_taxonomy_id), PRIMARY KEY(attachment_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE equipment_certification (certification_id INT AUTO_INCREMENT NOT NULL, user_id INT NOT NULL, equipment_id INT NOT NULL, theory_passed TINYINT(1) NOT NULL, practical_passed TINYINT(1) NOT NULL, valid TINYINT(1) NOT NULL, expiration_date DATETIME DEFAULT NULL, INDEX IDX_C298857A76ED395 (user_id), INDEX IDX_C298857517FE9FE (equipment_id), PRIMARY KEY(certification_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE checkin_equipment_instance ADD CONSTRAINT FK_5575C94E82E3C2DE FOREIGN KEY (checked_by) REFERENCES user (user_id);
ALTER TABLE checkin_equipment_instance ADD CONSTRAINT FK_5575C94E5B13863A FOREIGN KEY (equipment_instance_id) REFERENCES equipment_instance (equipment_instance_id);
ALTER TABLE checkout_equipment_instance ADD CONSTRAINT FK_BF67EAF982E3C2DE FOREIGN KEY (checked_by) REFERENCES user (user_id);
ALTER TABLE checkout_equipment_instance ADD CONSTRAINT FK_BF67EAF932C8A3DE FOREIGN KEY (organization_id) REFERENCES organization (organization_id);
ALTER TABLE checkout_equipment_instance ADD CONSTRAINT FK_BF67EAF95B13863A FOREIGN KEY (equipment_instance_id) REFERENCES equipment_instance (equipment_instance_id);
ALTER TABLE documentation_section_attachment ADD CONSTRAINT FK_22ADE8C299216C44 FOREIGN KEY (documentation_section_id) REFERENCES documentation_section (section_id);
ALTER TABLE documentation_section_attachment ADD CONSTRAINT FK_22ADE8C2AE9BD797 FOREIGN KEY (attachment_taxonomy_id) REFERENCES attachment_taxonomy (attachment_taxonomy_id);
ALTER TABLE html_content_documentation_section ADD CONSTRAINT FK_1130689E99216C44 FOREIGN KEY (documentation_section_id) REFERENCES documentation_section (section_id) ON DELETE CASCADE;
ALTER TABLE html_content_inline_section ADD CONSTRAINT FK_4319B49C7334AA34 FOREIGN KEY (inline_section_id) REFERENCES inline_section (section_id) ON DELETE CASCADE;
ALTER TABLE html_content_page_inline_section ADD CONSTRAINT FK_A299EAAEFC303383 FOREIGN KEY (page_inline_section_id) REFERENCES page_inline_section (section_id) ON DELETE CASCADE;
ALTER TABLE html_content_page_section ADD CONSTRAINT FK_14746206D3C3D2E4 FOREIGN KEY (page_section_id) REFERENCES page_section (section_id) ON DELETE CASCADE;
ALTER TABLE inline_section ADD CONSTRAINT FK_E427E2A7C703EEC9 FOREIGN KEY (documentation_id) REFERENCES documentation_section (section_id);
ALTER TABLE inline_section ADD CONSTRAINT FK_E427E2A7727ACA70 FOREIGN KEY (parent_id) REFERENCES inline_section (section_id);
ALTER TABLE inline_section_attachment ADD CONSTRAINT FK_104F9FB57334AA34 FOREIGN KEY (inline_section_id) REFERENCES inline_section (section_id);
ALTER TABLE inline_section_attachment ADD CONSTRAINT FK_104F9FB5AE9BD797 FOREIGN KEY (attachment_taxonomy_id) REFERENCES attachment_taxonomy (attachment_taxonomy_id);
ALTER TABLE page ADD CONSTRAINT FK_140AB620F41512D1 FOREIGN KEY (equipment_taxonomy_id) REFERENCES equipment_taxonomy (equipment_taxonomy_id);
ALTER TABLE page_inline_section ADD CONSTRAINT FK_55BDD1F3D3C3D2E4 FOREIGN KEY (page_section_id) REFERENCES page_section (section_id);
ALTER TABLE page_inline_section ADD CONSTRAINT FK_55BDD1F3727ACA70 FOREIGN KEY (parent_id) REFERENCES page_inline_section (section_id);
ALTER TABLE page_inline_section_attachment ADD CONSTRAINT FK_1E0B16B1FC303383 FOREIGN KEY (page_inline_section_id) REFERENCES page_inline_section (section_id);
ALTER TABLE page_inline_section_attachment ADD CONSTRAINT FK_1E0B16B1AE9BD797 FOREIGN KEY (attachment_taxonomy_id) REFERENCES attachment_taxonomy (attachment_taxonomy_id);
ALTER TABLE page_section ADD CONSTRAINT FK_D713917AC4663E4 FOREIGN KEY (page_id) REFERENCES page (page_id);
ALTER TABLE page_section ADD CONSTRAINT FK_D713917A727ACA70 FOREIGN KEY (parent_id) REFERENCES page_section (section_id);
ALTER TABLE page_section_attachment ADD CONSTRAINT FK_B165C1D2D3C3D2E4 FOREIGN KEY (page_section_id) REFERENCES page_section (section_id);
ALTER TABLE page_section_attachment ADD CONSTRAINT FK_B165C1D2AE9BD797 FOREIGN KEY (attachment_taxonomy_id) REFERENCES attachment_taxonomy (attachment_taxonomy_id);
ALTER TABLE equipment_certification ADD CONSTRAINT FK_C298857A76ED395 FOREIGN KEY (user_id) REFERENCES user (user_id);
ALTER TABLE equipment_certification ADD CONSTRAINT FK_C298857517FE9FE FOREIGN KEY (equipment_id) REFERENCES equipment (equipment_id);
ALTER TABLE attachment_taxonomy CHANGE name name VARCHAR(100) DEFAULT NULL, CHANGE slug slug VARCHAR(255) DEFAULT NULL;
ALTER TABLE location_taxonomy CHANGE name name VARCHAR(100) DEFAULT NULL, CHANGE slug slug VARCHAR(255) DEFAULT NULL;
ALTER TABLE organization DROP slug;
ALTER TABLE equipment_instance ADD first_time_used DATETIME DEFAULT NULL, ADD checked_out TINYINT(1) NOT NULL;
ALTER TABLE equipment_instance_taxonomy CHANGE name name VARCHAR(100) DEFAULT NULL, CHANGE slug slug VARCHAR(255) DEFAULT NULL;
ALTER TABLE equipment_taxonomy ADD slug VARCHAR(255) DEFAULT NULL, DROP path, DROP date_add, DROP date_update, CHANGE name name VARCHAR(100) DEFAULT NULL, CHANGE children_count level INT DEFAULT NULL;
ALTER TABLE equipment_taxonomy ADD CONSTRAINT FK_CDD13C1B727ACA70 FOREIGN KEY (parent_id) REFERENCES equipment_taxonomy (equipment_taxonomy_id);
CREATE INDEX IDX_CDD13C1B727ACA70 ON equipment_taxonomy (parent_id);
ALTER TABLE periodic_control_taxonomy CHANGE name name VARCHAR(100) DEFAULT NULL, CHANGE slug slug VARCHAR(255) DEFAULT NULL;
